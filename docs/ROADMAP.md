# ROADMAP — 里程碑与验收

## M0 文档冻结
- 验收标准：GAME_PLAN、SYSTEMS、ECONOMY、ROADMAP、DECISIONS 完整且评审通过；范围、命名、约束已锁定。

## M1 可玩切片
- 验收标准：
  - 在线循环可跑：E 产出、升级购买、契约接受与完成、研究基础节点可用。
  - 离线结算与存档/加载可用，schemaVersion 存在。
  - Ascend 原型可触发并产生 Insight，但仅保留核心加成。
  - 基础 UI 完成（资源栏、订单、升级、研究、Ascend、调试）。

## M2 差异化强化
- 验收标准：
  - 契约约束与评分机制上线，奖励与 Reputation 阶梯可观察。
  - 研究分支提供分化路径（槽位、速度、自动化、特殊奖励）。
  - 数据驱动配置迁入 `src/engine/data/*.ts`，核心数值可热调（重载）。
  - Ascend 收益公式与保留规则稳定，提供预览。

## M3 平衡与可维护
- 验收标准：
  - 关键公式（产出、成本、奖励、离线 cap）可配置，具备基础平衡表与调参脚本（最小集）。
  - 确定性验证：同样输入/seed 产出一致；离线与在线结算差异在容差内。
  - 迁移工具具备向后兼容能力；错误处理与回退路径存在。
  - 性能与内存达标：tick 可支撑目标设备帧率，契约/研究数据量在预期范围。

## M4 发布准备
- 验收标准：
  - UI/文案打磨（仍为占位风格但无阻碍理解），新手提示完成。
  - 提供 Help/指南 Tab，用户可以快速了解基础循环。
  - 观测性：调试/日志面板、常见错误提示、导入导出防呆。
  - 打包与脚本通过（build/test/lint），README 链接更新。
  - 关键设计决策记录在 DECISIONS 且无未决核心风险。

## M5 境界线/阶段解锁（主线）
- 验收标准：
  - 新增灵阶主线配置表，至少包含 5 个阶段节点，每个节点有前置与奖励（产出上限、契约类型或槽位）。
  - UI 可查看当前灵阶、下一阶段要求与奖励，进度可验证（完成条件后可解锁）。
  - 灵阶与 Ascend 协同：Ascend 重置至初始境界，但保留研究与洞察，UI 提供预览说明。
  - 存档包含灵阶进度并通过迁移工具验证兼容。
  - 当前实现：提供 6 个原创境界，突破条件覆盖精华累积、契约完成与声望，UI 支持进度显示与禁用原因，飞升后回到初始境界且迁移向后兼容。

## M6 多资源 + 库存 + 配方队列（底座）
- 验收标准：
  - 引入至少两种新资源（如材料、灵蕴）并在 data 中可配置产出/消耗，UI 有基础展示。
  - 库存结构上线，支持堆叠、容量上限、存档/离线结算一致性校验。
  - 配方队列系统可创建/取消/完成任务（最小 UI 占位），队列长度可配置并受研究/灵阶影响。
  - 相关脚本（sim/test）验证多资源结算与队列推进的确定性，新增迁移覆盖库存字段。
  - 当前实现：资源改为可扩展 Record，新增 herb/ore 材料并可通过契约获取，UI 与导出/基线同步展示。

## M7 炼丹/炼器/装备（核心系统堆叠）
- 验收标准：
  - 炼丹：至少 3 个丹方，具备成本、时长、产出与品质权重；支持队列化生产与离线完成，产物存入库存。
  - 炼器：定义器胚/部位/词条表，锻造流程可复用队列，输出装备并写入存档。
  - 装备：角色/符匣界面展示装备位，支持穿戴/卸下/强化，强化公式数据驱动且确定性。
  - 研究/灵阶与上述系统产生可见联动（如加速、成功率、额外词条），相关数据表与 UI 文案同步。
  - 当前实现：装备底座与炼器队列已上线，包含四个槽位的原创蓝图与词缀定义，穿戴/卸下可影响产出乘区、契约速度与离线上限；锻造基于 seed 可复现的稀有度/词缀，并可分解返还材料，UI 展示加成与进度。

## M8 门派/弟子/历练（自动化与探索）
- 验收标准：
  - 弟子实体上线：生成规则确定性（seed），包含基础属性与专精，存档可迁移。
  - 派遣系统：可将弟子派往炼丹/炼器/历练，派遣过程对产出或成功率有可量化影响。
  - 历练/秘境：以节点图或任务列表呈现，含时长、风险、奖励表，支持离线推进与结算。
  - 自动化：通过研究或灵阶解锁自动排产/派遣选项，并可在 UI 切换，具备最小防呆提示。
